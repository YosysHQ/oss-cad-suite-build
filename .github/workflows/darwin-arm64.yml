name: darwin-arm64

on:
  workflow_dispatch:
  workflow_run:
    workflows: [ darwin-x64 ]
    types:
      - completed

jobs:
  darwin-arm64-python3:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-python3
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-python3.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download linux-x64-python3-native
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-python3-native.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=python3 --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-python3.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-python3.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-xdot:
    runs-on: ubuntu-latest
    continue-on-error: true
    needs: darwin-arm64-python3
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-xdot
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-xdot.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-python3
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-python3.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-python3-native
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-python3-native.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=xdot --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-xdot.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-xdot.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-graphviz:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-graphviz
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-graphviz.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=graphviz --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-graphviz.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-graphviz.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-yosys:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-yosys
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-yosys.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download linux-x64-abc
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-abc.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=yosys --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-yosys.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-yosys.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-formal:
    runs-on: ubuntu-latest
    needs: darwin-arm64-python3
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-formal
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-formal.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-python3
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-python3.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-python3-native
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-python3-native.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=formal --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-formal.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-formal.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-imctk:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-imctk
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-imctk.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=imctk --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-imctk.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-imctk.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-ghdl:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-ghdl
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-ghdl.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=ghdl --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-ghdl.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-ghdl.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-ghdl-yosys-plugin:
    runs-on: ubuntu-latest
    continue-on-error: true
    needs: [ darwin-arm64-ghdl, darwin-arm64-yosys ]
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-ghdl-yosys-plugin
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-ghdl-yosys-plugin.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-ghdl
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-ghdl.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-yosys
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-yosys.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=ghdl-yosys-plugin --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-ghdl-yosys-plugin.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-ghdl-yosys-plugin.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-yosys-slang-plugin:
    runs-on: ubuntu-latest
    needs: darwin-arm64-yosys
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-yosys-slang-plugin
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-yosys-slang-plugin.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-yosys
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-yosys.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=yosys-slang-plugin --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-yosys-slang-plugin.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-yosys-slang-plugin.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-nextpnr-generic:
    runs-on: ubuntu-latest
    continue-on-error: true
    needs: darwin-arm64-python3
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-nextpnr-generic
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-nextpnr-generic.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-python3
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-python3.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-nextpnr-bba
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-nextpnr-bba.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-python3-native
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-python3-native.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=nextpnr-generic --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-nextpnr-generic.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-nextpnr-generic.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-nextpnr-ice40:
    runs-on: ubuntu-latest
    continue-on-error: true
    needs: darwin-arm64-python3
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-nextpnr-ice40
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-nextpnr-ice40.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-python3
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-python3.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-icestorm-bba
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-icestorm-bba.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-nextpnr-bba
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-nextpnr-bba.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-python3-native
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-python3-native.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=nextpnr-ice40 --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-nextpnr-ice40.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-nextpnr-ice40.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-nextpnr-ecp5:
    runs-on: ubuntu-latest
    continue-on-error: true
    needs: darwin-arm64-python3
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-nextpnr-ecp5
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-nextpnr-ecp5.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-python3
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-python3.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-nextpnr-bba
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-nextpnr-bba.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-prjtrellis-bba
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-prjtrellis-bba.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-python3-native
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-python3-native.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=nextpnr-ecp5 --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-nextpnr-ecp5.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-nextpnr-ecp5.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-nextpnr-machxo2:
    runs-on: ubuntu-latest
    continue-on-error: true
    needs: darwin-arm64-python3
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-nextpnr-machxo2
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-nextpnr-machxo2.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-python3
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-python3.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-nextpnr-bba
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-nextpnr-bba.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-prjtrellis-bba
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-prjtrellis-bba.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-python3-native
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-python3-native.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=nextpnr-machxo2 --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-nextpnr-machxo2.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-nextpnr-machxo2.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-nextpnr-nexus:
    runs-on: ubuntu-latest
    continue-on-error: true
    needs: darwin-arm64-python3
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-nextpnr-nexus
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-nextpnr-nexus.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-python3
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-python3.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-nextpnr-bba
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-nextpnr-bba.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-prjoxide-bba
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-prjoxide-bba.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-python3-native
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-python3-native.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=nextpnr-nexus --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-nextpnr-nexus.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-nextpnr-nexus.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-nextpnr-himbaechel:
    runs-on: ubuntu-latest
    continue-on-error: true
    needs: darwin-arm64-python3
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-nextpnr-himbaechel
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-nextpnr-himbaechel.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-python3
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-python3.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-apicula-bba
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-apicula-bba.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-nextpnr-bba
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-nextpnr-bba.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-python3-native
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-python3-native.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=nextpnr-himbaechel --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-nextpnr-himbaechel.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-nextpnr-himbaechel.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-icestorm:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-icestorm
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-icestorm.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=icestorm --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-icestorm.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-icestorm.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-prjtrellis:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-prjtrellis
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-prjtrellis.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=prjtrellis --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-prjtrellis.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-prjtrellis.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-prjoxide:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-prjoxide
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-prjoxide.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=prjoxide --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-prjoxide.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-prjoxide.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-apicula:
    runs-on: ubuntu-latest
    continue-on-error: true
    needs: darwin-arm64-python3
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-apicula
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-apicula.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-python3
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-python3.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-python3-native
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-python3-native.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=apicula --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-apicula.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-apicula.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-openfpgaloader:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-openfpgaloader
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-openfpgaloader.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=openfpgaloader --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-openfpgaloader.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-openfpgaloader.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-picosat:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-picosat
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-picosat.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=picosat --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-picosat.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-picosat.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-aiger:
    runs-on: ubuntu-latest
    continue-on-error: true
    needs: darwin-arm64-picosat
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-aiger
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-aiger.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-picosat
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-picosat.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=aiger --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-aiger.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-aiger.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-avy:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-avy
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-avy.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=avy --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-avy.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-avy.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-lingeling:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-lingeling
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-lingeling.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=lingeling --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-lingeling.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-lingeling.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-cadical:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-cadical
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-cadical.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=cadical --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-cadical.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-cadical.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-btor2tools:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-btor2tools
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-btor2tools.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=btor2tools --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-btor2tools.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-btor2tools.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-bitwuzla:
    runs-on: ubuntu-latest
    continue-on-error: true
    needs: [ darwin-arm64-btor2tools, darwin-arm64-cadical, darwin-arm64-lingeling ]
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-bitwuzla
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-bitwuzla.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-btor2tools
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-btor2tools.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-cadical
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-cadical.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-lingeling
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-lingeling.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-symfpu
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-symfpu.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=bitwuzla --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-bitwuzla.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-bitwuzla.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-boolector:
    runs-on: ubuntu-latest
    continue-on-error: true
    needs: [ darwin-arm64-btor2tools, darwin-arm64-cadical, darwin-arm64-lingeling ]
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-boolector
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-boolector.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-btor2tools
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-btor2tools.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-cadical
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-cadical.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-lingeling
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-lingeling.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=boolector --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-boolector.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-boolector.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-cvc4:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-cvc4
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-cvc4.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=cvc4 --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-cvc4.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-cvc4.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-libpoly:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-libpoly
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-libpoly.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=libpoly --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-libpoly.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-libpoly.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-cvc5:
    runs-on: ubuntu-latest
    continue-on-error: true
    needs: [ darwin-arm64-cadical, darwin-arm64-libpoly ]
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-cvc5
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-cvc5.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-cadical
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-cadical.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-libpoly
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-libpoly.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-symfpu
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-symfpu.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=cvc5 --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-cvc5.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-cvc5.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-yices:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-yices
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-yices.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=yices --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-yices.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-yices.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-smt-switch:
    runs-on: ubuntu-latest
    continue-on-error: true
    needs: [ darwin-arm64-boolector, darwin-arm64-cvc5 ]
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-smt-switch
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-smt-switch.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-boolector
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-boolector.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-cvc5
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-cvc5.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=smt-switch --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-smt-switch.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-smt-switch.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-pono:
    runs-on: ubuntu-latest
    continue-on-error: true
    needs: [ darwin-arm64-boolector, darwin-arm64-cvc5, darwin-arm64-smt-switch ]
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-pono
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-pono.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-boolector
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-boolector.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-cvc5
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-cvc5.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-smt-switch
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-smt-switch.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=pono --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-pono.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-pono.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-z3:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-z3
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-z3.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=z3 --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-z3.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-z3.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-eqy:
    runs-on: ubuntu-latest
    continue-on-error: true
    needs: darwin-arm64-yosys
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-eqy
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-eqy.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-yosys
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-yosys.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=eqy --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-eqy.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-eqy.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-gtkwave:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-gtkwave
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-gtkwave.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=gtkwave --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-gtkwave.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-gtkwave.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-verilator:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-verilator
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-verilator.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=verilator --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-verilator.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-verilator.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-iverilog:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-iverilog
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-iverilog.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=iverilog --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-iverilog.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-iverilog.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-python-programmers:
    runs-on: ubuntu-latest
    continue-on-error: true
    needs: darwin-arm64-python3
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-python-programmers
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-python-programmers.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-python3
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-python3.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-python3-native
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-python3-native.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=python-programmers --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-python-programmers.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-python-programmers.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-utils:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-utils
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-utils.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=utils --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-utils.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-utils.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-pyhdl:
    runs-on: ubuntu-latest
    continue-on-error: true
    needs: darwin-arm64-python3
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-pyhdl
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-pyhdl.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-python3
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-python3.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-python3-native
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-python3-native.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=pyhdl --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-pyhdl.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-pyhdl.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-cocotb:
    runs-on: ubuntu-latest
    continue-on-error: true
    needs: darwin-arm64-python3
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-cocotb
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-cocotb.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Download darwin-arm64-python3
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-python3.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download linux-x64-python3-native
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-linux-x64/linux-x64-python3-native.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=cocotb --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-cocotb.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-cocotb.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-system-resources:
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Cache sources
        id: cache-sources
        uses: actions/cache@v4
        with:
          path: _sources
          key: cache-sources-system-resources
      - name: Download previous build
        run: |
          URL="https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-system-resources.tgz"
          if wget --spider "${URL}" 2>/dev/null; then
              wget -qO- "${URL}" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
          else
              echo "Previous version not found in bucket"
          fi
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=system-resources --single --tar
      - uses: ncipollo/release-action@v1
        if: hashFiles('darwin-arm64-system-resources.tgz') != ''
        with:
          allowUpdates: True
          prerelease: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: bucket-darwin-arm64
          artifacts: "darwin-arm64-system-resources.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
  darwin-arm64-default:
    runs-on: ubuntu-latest
    needs: [ darwin-arm64-aiger, darwin-arm64-apicula, darwin-arm64-avy, darwin-arm64-bitwuzla, darwin-arm64-boolector, darwin-arm64-cocotb, darwin-arm64-cvc4, darwin-arm64-cvc5, darwin-arm64-eqy, darwin-arm64-formal, darwin-arm64-ghdl, darwin-arm64-ghdl-yosys-plugin, darwin-arm64-graphviz, darwin-arm64-gtkwave, darwin-arm64-icestorm, darwin-arm64-imctk, darwin-arm64-iverilog, darwin-arm64-nextpnr-ecp5, darwin-arm64-nextpnr-generic, darwin-arm64-nextpnr-himbaechel, darwin-arm64-nextpnr-ice40, darwin-arm64-nextpnr-machxo2, darwin-arm64-nextpnr-nexus, darwin-arm64-openfpgaloader, darwin-arm64-pono, darwin-arm64-prjoxide, darwin-arm64-prjtrellis, darwin-arm64-pyhdl, darwin-arm64-python-programmers, darwin-arm64-python3, darwin-arm64-system-resources, darwin-arm64-utils, darwin-arm64-verilator, darwin-arm64-xdot, darwin-arm64-yices, darwin-arm64-yosys, darwin-arm64-yosys-slang-plugin, darwin-arm64-z3 ]
    steps:
      - name: Get current date
        id: date
        run: echo "date=$(date +'%Y-%m-%d')" >> $GITHUB_OUTPUT
      - uses: actions/checkout@v4
        with:
          repository: 'yosyshq/oss-cad-suite-build'
      - name: Download darwin-arm64-aiger
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-aiger.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-apicula
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-apicula.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-avy
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-avy.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-bitwuzla
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-bitwuzla.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-boolector
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-boolector.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-cocotb
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-cocotb.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-cvc4
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-cvc4.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-cvc5
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-cvc5.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-eqy
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-eqy.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-formal
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-formal.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-ghdl
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-ghdl.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-ghdl-yosys-plugin
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-ghdl-yosys-plugin.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-graphviz
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-graphviz.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-gtkwave
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-gtkwave.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-icestorm
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-icestorm.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-imctk
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-imctk.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-iverilog
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-iverilog.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-nextpnr-ecp5
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-nextpnr-ecp5.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-nextpnr-generic
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-nextpnr-generic.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-nextpnr-himbaechel
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-nextpnr-himbaechel.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-nextpnr-ice40
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-nextpnr-ice40.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-nextpnr-machxo2
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-nextpnr-machxo2.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-nextpnr-nexus
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-nextpnr-nexus.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-openfpgaloader
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-openfpgaloader.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-pono
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-pono.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-prjoxide
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-prjoxide.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-prjtrellis
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-prjtrellis.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-pyhdl
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-pyhdl.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-python-programmers
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-python-programmers.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-python3
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-python3.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-system-resources
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-system-resources.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-utils
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-utils.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-verilator
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-verilator.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-xdot
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-xdot.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-yices
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-yices.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-yosys
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-yosys.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-yosys-slang-plugin
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-yosys-slang-plugin.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Download darwin-arm64-z3
        run: wget -qO- "https://github.com/yosyshq/oss-cad-suite-build/releases/download/bucket-darwin-arm64/darwin-arm64-z3.tgz" --retry-connrefused --read-timeout=20 --timeout=15 --retry-on-http-error=404 | tar xvfz -
      - name: Build
        run: ./builder.py build --arch=darwin-arm64 --target=default --single
      - uses: ncipollo/release-action@v1
        if: hashFiles('_outputs/darwin-arm64/default/*.tgz') != ''
        with:
          allowUpdates: True
          omitBody: True
          omitBodyDuringUpdate: True
          omitNameDuringUpdate: True
          tag: ${{ steps.date.outputs.date }}
          artifacts: "_outputs/darwin-arm64/default/*.tgz"
          token: ${{ secrets.GITHUB_TOKEN }}
